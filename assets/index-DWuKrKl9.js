(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const c=t=>document.querySelector(t),m=document.createElement("div");m.textContent="You’re offline — using cached data when possible.";m.style.cssText="display:none;background:#fde68a;color:#5b3a00;padding:.5rem;text-align:center;font-size:.9rem;";document.body.prepend(m);window.addEventListener("offline",()=>m.style.display="block");window.addEventListener("online",()=>m.style.display="none");const U=c("#filters"),q=c("#status"),h=document.querySelector(".result"),G=c("#activityCard"),N=c("#activityText"),_=c("#activityMeta"),F=c("#gifCaption"),T=c("#favoritesList"),D=c("#clearFavs"),R=c("#saveBtn"),H=c("#anotherBtn"),v=document.getElementById("gif"),w=document.getElementById("shareBtn"),b=document.getElementById("themeToggle"),P=document.getElementById("quote"),B=document.getElementById("author"),E=document.getElementById("type"),S=document.getElementById("participants"),k=document.getElementById("maxprice");let l=null,u=null,y=null;const C="OUvkqa63GDhmIqremguZFKRxnf2C1Snk".trim();function J(t){return t===0?"Free":t<.3?"Low":t<.6?"Medium":"High"}function $(t){h==null||h.setAttribute("aria-busy",String(t))}function f(t){q.textContent=t||""}function Y(t){t&&(t.hidden=!1)}function j(t){t&&(t.hidden=!0)}async function p(t,e=12e3){const a=new AbortController,n=setTimeout(()=>a.abort(),e);try{const r=await fetch(t,{signal:a.signal});if(!r.ok)throw new Error(`${r.status} ${r.statusText}`);const o=await r.text();if(!o)throw new Error("Empty response");return JSON.parse(o)}finally{clearTimeout(n)}}function K(t){const e=(t||"").toLowerCase().replace(/[^a-z0-9\s]/g,"").split(/\s+/).filter(Boolean),a=["music","dance","game","gaming","exercise","workout","cook","cooking","draw","art","outdoors","nature","learn","coding","cat","dog","funny","meme","travel","study","chill","relax","party","movie","sports","basketball","football","volleyball"];return e.find(n=>a.includes(n))||"funny"}const O="https://api.allorigins.win/raw";async function z(t={}){const e=new URL("https://www.boredapi.com/api/activity");Object.entries(t).forEach(([a,n])=>{n!==""&&n!==null&&n!==void 0&&e.searchParams.set(a,n)}),e.searchParams.set("_",Date.now().toString());try{return await p(e.toString(),12e3)}catch(a){console.warn("[BoredAPI direct failed]",a)}try{const a=new URL(O);return a.searchParams.set("url",encodeURIComponent(e.toString())),await p(a.toString(),12e3)}catch(a){throw console.error("[BoredAPI proxy failed]",a),new Error("Activity source unavailable.")}}async function V(t){var a,n,r,o;if(!C)return console.warn("Missing VITE_GIPHY_API_KEY — using fallback GIF."),{images:{original:{url:"https://media.giphy.com/media/ASd0Ukj0y3qMM/giphy.gif"}},title:"Fallback GIF"};const e=new URL("https://api.giphy.com/v1/gifs/random");e.searchParams.set("api_key",C),e.searchParams.set("tag",t),e.searchParams.set("rating","pg"),e.searchParams.set("_",Date.now().toString());try{const i=await p(e.toString(),12e3),s=i==null?void 0:i.data;if((n=(a=s==null?void 0:s.images)==null?void 0:a.original)!=null&&n.url)return s;throw new Error("No GIF in response")}catch(i){console.warn("[Giphy direct failed]",i)}try{const i=new URL(O);i.searchParams.set("url",encodeURIComponent(e.toString()));const s=await p(i.toString(),12e3),d=s==null?void 0:s.data;if((o=(r=d==null?void 0:d.images)==null?void 0:r.original)!=null&&o.url)return d;throw new Error("No GIF in response (proxy)")}catch(i){console.error("[Giphy proxy failed]",i)}return{images:{original:{url:"https://media.giphy.com/media/ASd0Ukj0y3qMM/giphy.gif"}},title:"Fallback GIF"}}async function Q(){try{const t=await p("https://api.quotable.io/random",8e3);return{text:t.content,author:t.author}}catch{return{text:"Do something today that your future self will thank you for.",author:"Unknown"}}}function W(t){!P||!B||(P.textContent=`"${t.text}"`,B.textContent=`- ${t.author}`,l=t,localStorage.setItem("rfg-last-quote",JSON.stringify(t)))}function X(t){N.textContent=t.activity,_.innerHTML=`
    <li><strong>Type:</strong> ${t.type}</li>
    <li><strong>Participants:</strong> ${t.participants}</li>
    <li><strong>Price:</strong> ${J(t.price)}</li>
  `,Y(G)}function Z(t,e=""){var r,o;const a=((o=(r=t==null?void 0:t.images)==null?void 0:r.original)==null?void 0:o.url)||"",n=e||(t==null?void 0:t.title)||"Random GIF";if(v&&(v.src=a,v.alt=n),F){const i=[];t!=null&&t.username&&i.push(`by @${t.username}`),t!=null&&t.rating&&i.push(`rating: ${t.rating}`),t!=null&&t.import_datetime&&i.push(`added: ${t.import_datetime.slice(0,10)}`),F.textContent=[n,i.join(" • ")].filter(Boolean).join(" — ")}}function I(){try{return JSON.parse(localStorage.getItem("rfg-favs")||"[]")}catch{return[]}}function A(t){localStorage.setItem("rfg-favs",JSON.stringify(t))}function g(){const t=I();T.innerHTML=t.map(e=>`
    <li>
      <p>${e.activityText}</p>
      <img src="${e.gifUrl}" alt="Saved GIF" />
      <button class="btn" data-id="${e.id}">Remove</button>
    </li>
  `).join(""),T.querySelectorAll("button[data-id]").forEach(e=>{e.addEventListener("click",()=>{const a=e.getAttribute("data-id");A(I().filter(n=>n.id!==a)),g()})})}function tt(){const t={type:E.value||"",participants:S.value||"",maxprice:k.value||""};localStorage.setItem("rfg-filters",JSON.stringify(t))}function et(){try{const t=JSON.parse(localStorage.getItem("rfg-filters")||"{}");t.type!==void 0&&(E.value=t.type),t.participants!==void 0&&(S.value=t.participants),t.maxprice!==void 0&&(k.value=t.maxprice)}catch{}}async function M(){const t=parseInt(S.value,10),e=Number.isFinite(t)&&t>0?t:"",a={type:E.value,participants:e,maxprice:k.value||""};try{f("Finding something fun…"),$(!0);let n;try{n=await z(a)}catch{const s=["Try a new drawing style","Do 20 push-ups","Learn a quick card trick","Cook a 3-ingredient snack","Clean one drawer","Stretch for 10 minutes"];n={activity:s[Math.floor(Math.random()*s.length)],type:"random",participants:e||1,price:0},console.warn("[Activity warning] Using a quick idea while source is unavailable.")}X(n),u=n;const r=K(n.activity)||"funny",o=await V(r);Z(o),y=o;const i=await Q();W(i),f("Here you go!")}catch(n){console.error("[Generate error]",n),f(n.message||"Something went wrong."),j(G)}finally{$(!1)}}function nt(){var e,a,n,r;if(!u||!y)return;const t=I();t.unshift({id:crypto.randomUUID(),activityText:u.activity,gifUrl:((a=(e=y.images)==null?void 0:e.fixed_height_small)==null?void 0:a.url)||((r=(n=y.images)==null?void 0:n.original)==null?void 0:r.url)||""}),A(t),g(),f("Saved to favorites.")}function rt(){const t=(u==null?void 0:u.activity)||"A fun activity",e=l!=null&&l.text?`
${l.text} -${l.author}`:"";return`${t}${e}

${location.href}`}const L="theme";function x(t){const e=t==="dark";document.documentElement.classList.toggle("dark",e),localStorage.setItem(L,t)}function at(){const t=localStorage.getItem(L);if(t)return x(t);const e=window.matchMedia("(prefers-color-scheme: dark)").matches;x(e?"dark":"light")}function ot(){const t=localStorage.getItem(L)||"light";x(t==="dark"?"light":"dark")}b==null||b.addEventListener("click",ot);w==null||w.addEventListener("click",async()=>{const t=rt();try{navigator.share?await navigator.share({title:"Random Fun Generator",text:t,url:location.href}):(await navigator.clipboard.writeText(t),alert("Copied to clipboard!"))}catch{await navigator.clipboard.writeText(t),alert("Copied to clipboard!")}});at();et();U.addEventListener("submit",t=>{t.preventDefault(),tt(),M()});H.addEventListener("click",t=>{t.preventDefault(),M()});R.addEventListener("click",t=>{t.preventDefault(),nt()});D.addEventListener("click",()=>{localStorage.removeItem("rfg-favs"),g(),f("Favorites cleared.")});g();
